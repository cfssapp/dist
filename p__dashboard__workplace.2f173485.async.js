(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"23Sy":function(g,R,a){g.exports={radar:"radar___1_avc",legend:"legend___cMjxg",legendItem:"legendItem___13xG8",dot:"dot___10Iis"}},JhTR:function(g,R,a){"use strict";a.r(R);var fe=a("14J3"),D=a("BMrR"),ge=a("jCWc"),P=a("kPKH"),Ue=a("IzEo"),v=a("bx4M"),Re=a("Mwp2"),j=a("VXEj"),x=a("1OyB"),O=a("vuIU"),b=a("Ji7U"),T=a("LK+K"),Le=a("aHsQ"),M=a("sGsY"),Pe=a("Telt"),A=a("Tckk"),Ae=a("cWXX"),w=a("/ezw"),N=a("q1tI"),e=a.n(N),L=a("uYtH"),W=a("9kvl"),J=a("FKOd"),K=a("wd/R"),k=a.n(K),f=a("yP6+"),Q=a("wx14");function X(u){var i=u.style;i.height="100%";var l=parseInt("".concat(getComputedStyle(u).height),10),t=parseInt("".concat(getComputedStyle(u).paddingTop),10)+parseInt("".concat(getComputedStyle(u).paddingBottom),10);return l-t}function F(u){if(!u)return 0;var i=u,l=X(i),t=i.parentNode;return t&&(l=X(t)),l}function Y(){return function(u){var i=function(l){Object(b.a)(d,l);var t=Object(T.a)(d);function d(){var o;Object(x.a)(this,d);for(var n=arguments.length,r=new Array(n),m=0;m<n;m++)r[m]=arguments[m];return o=t.call.apply(t,[this].concat(r)),o.state={computedHeight:0},o.root=void 0,o.handleRoot=function(E){o.root=E},o}return Object(O.a)(d,[{key:"componentDidMount",value:function(){var n=this.props.height;if(!n){var r=F(this.root);this.setState({computedHeight:r}),r<1&&(r=F(this.root),this.setState({computedHeight:r}))}}},{key:"render",value:function(){var n=this.props.height,r=this.state.computedHeight,m=n||r;return e.a.createElement("div",{ref:this.handleRoot},m>0&&e.a.createElement(u,Object(Q.a)({},this.props,{height:m})))}}]),d}(e.a.Component);return i}}var Z=Y,V=a("23Sy"),C=a.n(V),q=function(u){Object(b.a)(l,u);var i=Object(T.a)(l);function l(){var t;Object(x.a)(this,l);for(var d=arguments.length,o=new Array(d),n=0;n<d;n++)o[n]=arguments[n];return t=i.call.apply(i,[this].concat(o)),t.state={legendData:[]},t.chart=void 0,t.node=void 0,t.getG2Instance=function(r){t.chart=r},t.getLegendData=function(){if(!t.chart)return;var r=t.chart.getAllGeoms()[0];if(!r)return;var m=r.get("dataArray")||[],E=m.map(function(_){var p=_.map(function(h){return h._origin}),s={name:p[0].name,color:_[0].color,checked:!0,value:p.reduce(function(h,y){return h+y.value},0)};return s});t.setState({legendData:E})},t.handleRef=function(r){t.node=r},t.handleLegendClick=function(r,m){var E=r;E.checked=!E.checked;var _=t.state.legendData;_[m]=E;var p=_.filter(function(s){return s.checked}).map(function(s){return s.name});t.chart&&(t.chart.filter("name",function(s){return p.indexOf("".concat(s))>-1}),t.chart.repaint()),t.setState({legendData:_})},t}return Object(O.a)(l,[{key:"componentDidMount",value:function(){this.getLegendData()}},{key:"componentDidUpdate",value:function(d){var o=this.props.data;o!==d.data&&this.getLegendData()}},{key:"render",value:function(){var d=this,o=["#1890FF","#FACC14","#2FC25B","#8543E0","#F04864","#13C2C2","#fa8c16","#a0d911"],n=this.props,r=n.data,m=r===void 0?[]:r,E=n.height,_=E===void 0?0:E,p=n.title,s=n.hasLegend,h=s===void 0?!1:s,y=n.forceFit,ue=y===void 0?!0:y,I=n.tickCount,Ee=I===void 0?5:I,B=n.padding,me=B===void 0?[35,30,16,30]:B,H=n.animate,_e=H===void 0?!0:H,S=n.colors,$=S===void 0?o:S,z=this.state.legendData,pe={value:{min:0,tickCount:Ee}},ve=_-(h?80:22);return e.a.createElement("div",{className:C.a.radar,style:{height:_}},p&&e.a.createElement("h4",null,p),e.a.createElement(f.Chart,{scale:pe,height:ve,forceFit:ue,data:m,padding:me,animate:_e,onGetG2Instance:this.getG2Instance},e.a.createElement(f.Tooltip,null),e.a.createElement(f.Coord,{type:"polar"}),e.a.createElement(f.Axis,{name:"label",line:void 0,tickLine:void 0,grid:{lineStyle:{lineDash:void 0},hideFirstLine:!1}}),e.a.createElement(f.Axis,{name:"value",grid:{type:"polygon",lineStyle:{lineDash:void 0}}}),e.a.createElement(f.Geom,{type:"line",position:"label*value",color:["name",$],size:1}),e.a.createElement(f.Geom,{type:"point",position:"label*value",color:["name",$],shape:"circle",size:3})),h&&e.a.createElement(D.a,{className:C.a.legend},z.map(function(U,he){return e.a.createElement(P.a,{span:24/z.length,key:U.name,onClick:function(){return d.handleLegendClick(U,he)}},e.a.createElement("div",{className:C.a.legendItem},e.a.createElement("p",null,e.a.createElement("span",{className:C.a.dot,style:{backgroundColor:U.checked?U.color:"#aaa"}}),e.a.createElement("span",null,U.name)),e.a.createElement("h6",null,U.value)))})))}}]),l}(N.Component),ee=Z()(q),Ne=a("+L6B"),te=a("2/Rp"),ae=a("xvlK"),ne=a("tzUB"),re=a.n(ne),G=function(i){var l=i.links,t=i.linkElement,d=i.onAdd;return e.a.createElement("div",{className:re.a.linkGroup},l.map(function(o){return Object(N.createElement)(t,{key:"linkGroup-item-".concat(o.id||o.title),to:o.href,href:o.href},o.title)}),e.a.createElement(te.a,{size:"small",type:"primary",ghost:!0,onClick:d},e.a.createElement(ae.a,null)," \u6DFB\u52A0"))};G.defaultProps={links:[],onAdd:function(){},linkElement:"a"};var oe=G,le=a("ZiQ9"),c=a.n(le),se=[{title:"\u64CD\u4F5C\u4E00",href:""},{title:"\u64CD\u4F5C\u4E8C",href:""},{title:"\u64CD\u4F5C\u4E09",href:""},{title:"\u64CD\u4F5C\u56DB",href:""},{title:"\u64CD\u4F5C\u4E94",href:""},{title:"\u64CD\u4F5C\u516D",href:""}],de=function(i){var l=i.currentUser,t=l&&Object.keys(l).length;return t?e.a.createElement("div",{className:c.a.pageHeaderContent},e.a.createElement("div",{className:c.a.avatar},e.a.createElement(A.a,{size:"large",src:l.avatar})),e.a.createElement("div",{className:c.a.content},e.a.createElement("div",{className:c.a.contentTitle},"\u65E9\u5B89\uFF0C",l.name,"\uFF0C\u795D\u4F60\u5F00\u5FC3\u6BCF\u4E00\u5929\uFF01"),e.a.createElement("div",null,l.title," |",l.group))):e.a.createElement(w.a,{avatar:!0,paragraph:{rows:1},active:!0})},ie=function(){return e.a.createElement("div",{className:c.a.extraContent},e.a.createElement("div",{className:c.a.statItem},e.a.createElement(M.a,{title:"\u9879\u76EE\u6570",value:56})),e.a.createElement("div",{className:c.a.statItem},e.a.createElement(M.a,{title:"\u56E2\u961F\u5185\u6392\u540D",value:8,suffix:"/ 24"})),e.a.createElement("div",{className:c.a.statItem},e.a.createElement(M.a,{title:"\u9879\u76EE\u8BBF\u95EE",value:2223})))},ce=function(u){Object(b.a)(l,u);var i=Object(T.a)(l);function l(){var t;Object(x.a)(this,l);for(var d=arguments.length,o=new Array(d),n=0;n<d;n++)o[n]=arguments[n];return t=i.call.apply(i,[this].concat(o)),t.renderActivities=function(r){var m=r.template.split(/@\{([^{}]*)\}/gi).map(function(E){return r[E]?e.a.createElement("a",{href:r[E].link,key:r[E].name},r[E].name):E});return e.a.createElement(j.b.Item,{key:r.id},e.a.createElement(j.b.Item.Meta,{avatar:e.a.createElement(A.a,{src:r.user.avatar}),title:e.a.createElement("span",null,e.a.createElement("a",{className:c.a.username},r.user.name),"\xA0",e.a.createElement("span",{className:c.a.event},m)),description:e.a.createElement("span",{className:c.a.datetime,title:r.updatedAt},k()(r.updatedAt).fromNow())}))},t}return Object(O.a)(l,[{key:"componentDidMount",value:function(){var d=this.props.dispatch;d({type:"dashboardAndworkplace/init"})}},{key:"componentWillUnmount",value:function(){var d=this.props.dispatch;d({type:"dashboardAndworkplace/clear"})}},{key:"render",value:function(){var d=this,o=this.props,n=o.currentUser,r=o.activities,m=o.projectNotice,E=o.projectLoading,_=o.activitiesLoading,p=o.radarData;return!n||!n.userid?null:e.a.createElement(J.a,{content:e.a.createElement(de,{currentUser:n}),extraContent:e.a.createElement(ie,null)},e.a.createElement(D.a,{gutter:24},e.a.createElement(P.a,{xl:16,lg:24,md:24,sm:24,xs:24},e.a.createElement(v.a,{className:c.a.projectList,style:{marginBottom:24},title:"\u8FDB\u884C\u4E2D\u7684\u9879\u76EE",bordered:!1,extra:e.a.createElement(L.a,{to:"/"},"\u5168\u90E8\u9879\u76EE"),loading:E,bodyStyle:{padding:0}},m.map(function(s){return e.a.createElement(v.a.Grid,{className:c.a.projectGrid,key:s.id},e.a.createElement(v.a,{bodyStyle:{padding:0},bordered:!1},e.a.createElement(v.a.Meta,{title:e.a.createElement("div",{className:c.a.cardTitle},e.a.createElement(A.a,{size:"small",src:s.logo}),e.a.createElement(L.a,{to:s.href},s.title)),description:s.description}),e.a.createElement("div",{className:c.a.projectItemContent},e.a.createElement(L.a,{to:s.memberLink},s.member||""),s.updatedAt&&e.a.createElement("span",{className:c.a.datetime,title:s.updatedAt},k()(s.updatedAt).fromNow()))))})),e.a.createElement(v.a,{bodyStyle:{padding:0},bordered:!1,className:c.a.activeCard,title:"\u52A8\u6001",loading:_},e.a.createElement(j.b,{loading:_,renderItem:function(h){return d.renderActivities(h)},dataSource:r,className:c.a.activitiesList,size:"large"}))),e.a.createElement(P.a,{xl:8,lg:24,md:24,sm:24,xs:24},e.a.createElement(v.a,{style:{marginBottom:24},title:"\u5FEB\u901F\u5F00\u59CB / \u4FBF\u6377\u5BFC\u822A",bordered:!1,bodyStyle:{padding:0}},e.a.createElement(oe,{onAdd:function(){},links:se,linkElement:L.a})),e.a.createElement(v.a,{style:{marginBottom:24},bordered:!1,title:"XX \u6307\u6570",loading:p.length===0},e.a.createElement("div",{className:c.a.chart},e.a.createElement(ee,{hasLegend:!0,height:343,data:p}))),e.a.createElement(v.a,{bodyStyle:{paddingTop:12,paddingBottom:12},bordered:!1,title:"\u56E2\u961F",loading:E},e.a.createElement("div",{className:c.a.members},e.a.createElement(D.a,{gutter:48},m.map(function(s){return e.a.createElement(P.a,{span:12,key:"members-item-".concat(s.id)},e.a.createElement(L.a,{to:s.href},e.a.createElement(A.a,{src:s.logo,size:"small"}),e.a.createElement("span",{className:c.a.member},s.member)))})))))))}}]),l}(N.Component),Ce=R.default=Object(W.c)(function(u){var i=u.dashboardAndworkplace,l=i.currentUser,t=i.projectNotice,d=i.activities,o=i.radarData,n=u.loading;return{currentUser:l,projectNotice:t,activities:d,radarData:o,currentUserLoading:n.effects["dashboardAndworkplace/fetchUserCurrent"],projectLoading:n.effects["dashboardAndworkplace/fetchProjectNotice"],activitiesLoading:n.effects["dashboardAndworkplace/fetchActivitiesList"]}})(ce)},ZiQ9:function(g,R,a){g.exports={activitiesList:"activitiesList___1iz4w",username:"username___2CaQo",event:"event___37Bra",pageHeaderContent:"pageHeaderContent___1v9Rj",avatar:"avatar___2REGU",content:"content___2JXYM",contentTitle:"contentTitle___2ZQYk",extraContent:"extraContent___171XZ",statItem:"statItem___WnzK8",members:"members___pCbZL",member:"member___1PrAP",projectList:"projectList___1-phY",cardTitle:"cardTitle___i2mGR",projectGrid:"projectGrid___2_ET-",projectItemContent:"projectItemContent___1Af7z",datetime:"datetime___3wNS1",activeCard:"activeCard___2L47N"}},tzUB:function(g,R,a){g.exports={linkGroup:"linkGroup___3u5k3"}}}]);
